âº ã‚«ãƒ¼ãƒ‰æƒ…å ±ãŒè¨€èªã”ã¨ã«ç•°ãªã‚‹ç”»åƒãƒ»åç§°ã‚’æŒã¤ã“ã¨ã‚’è€ƒæ…®ã—ã¦ã€ã‚ˆã‚Šç¾å®Ÿçš„ãªå®Ÿè£…æ–¹æ³•ã‚’å†ææ¡ˆã—ã¾ã™ã€‚

  ---
  ğŸ´ ã‚«ãƒ¼ãƒ‰å¤šè¨€èªå¯¾å¿œã‚’å«ã‚ãŸã‚°ãƒ­ãƒ¼ãƒãƒ«å±•é–‹æˆ¦ç•¥

  ğŸ“Š ç¾çŠ¶ã®èª²é¡Œ

  1. cardsãƒ†ãƒ¼ãƒ–ãƒ«: æ—¥æœ¬èªã‚«ãƒ¼ãƒ‰åãƒ»ç”»åƒURLã®ã¿
  2. UIæ–‡è¨€: æ—¥æœ¬èªãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
  3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”Ÿæˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„: ã‚³ãƒ¡ãƒ³ãƒˆç­‰ã®ç¿»è¨³ãŒå¿…è¦
  4. ã‚«ãƒ¼ãƒ‰ç”»åƒ: è¨€èªã”ã¨ã«ç•°ãªã‚‹ç”»åƒãŒå¿…è¦(ä¾‹: è‹±èªç‰ˆã¯è‹±èªè¡¨è¨˜ã®ã‚«ãƒ¼ãƒ‰ç”»åƒ)

  ---
  ğŸ—ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ(2ã¤ã®é¸æŠè‚¢)

  ğŸ“Œ ã‚ªãƒ—ã‚·ãƒ§ãƒ³A: å¤šè¨€èªã‚«ãƒ¼ãƒ‰ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ(æ¨å¥¨)

  ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

  -- æ—¢å­˜ã®cardsãƒ†ãƒ¼ãƒ–ãƒ«ã¯åŸºæœ¬æƒ…å ±ã®ã¿(è¨€èªéä¾å­˜)
  ALTER TABLE cards ADD COLUMN card_number VARCHAR; -- ã‚«ãƒ¼ãƒ‰ç•ªå·(å›½éš›å…±é€šID)
  ALTER TABLE cards ADD COLUMN set_code VARCHAR;    -- ã‚»ãƒƒãƒˆã‚³ãƒ¼ãƒ‰

  -- æ–°è¦: è¨€èªåˆ¥ã‚«ãƒ¼ãƒ‰æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ«
  CREATE TABLE card_localizations (
    id SERIAL PRIMARY KEY,
    card_id INTEGER REFERENCES cards(id),
    language_code VARCHAR(5),  -- 'ja', 'en', 'zh-CN', 'ko', etc.
    name TEXT,                 -- è¨€èªåˆ¥ã‚«ãƒ¼ãƒ‰å
    image_url TEXT,            -- è¨€èªåˆ¥ã‚«ãƒ¼ãƒ‰ç”»åƒURL
    description TEXT,          -- è¨€èªåˆ¥èª¬æ˜æ–‡
    UNIQUE(card_id, language_code)
  );

  CREATE INDEX idx_card_localizations_card_lang
    ON card_localizations(card_id, language_code);

  ãƒ¡ãƒªãƒƒãƒˆ

  - âœ… å„è¨€èªã§æ­£ç¢ºãªã‚«ãƒ¼ãƒ‰ç”»åƒãƒ»åç§°ã‚’è¡¨ç¤ºå¯èƒ½
  - âœ… SEOæœ€é©åŒ–(å„è¨€èªã§æ¤œç´¢å¯èƒ½)
  - âœ… ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãŒé«˜ã„

  ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

  - âŒ åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥ã®æ‰‹é–“ãŒå¤§ãã„
  - âŒ ãƒ‡ãƒ¼ã‚¿é‡ãŒå¢—åŠ (è¨€èªæ•° Ã— ã‚«ãƒ¼ãƒ‰æ•°)

  ---
  ğŸ“Œ ã‚ªãƒ—ã‚·ãƒ§ãƒ³B: å¤–éƒ¨APIçµ±åˆæ–¹å¼(æœ€ã‚‚ç°¡å˜)

  å®Ÿè£…æ¦‚è¦

  å¤–éƒ¨ã®ãƒã‚±ãƒ¢ãƒ³ã‚«ãƒ¼ãƒ‰APIã‚’åˆ©ç”¨ã—ã¦ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«è¨€èªåˆ¥ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—

  åˆ©ç”¨å¯èƒ½ãªAPI:
  1. https://pokemontcg.io/ (ç„¡æ–™)
    - è‹±èªãƒ»æ—¥æœ¬èªãƒ»ãã®ä»–å¤šè¨€èªå¯¾å¿œ
    - ã‚«ãƒ¼ãƒ‰ç”»åƒURLã€åå‰ã€èª¬æ˜æ–‡ã™ã¹ã¦æä¾›
    - RESTful APIã€èªè¨¼ä¸è¦(ç„¡æ–™ãƒ—ãƒ©ãƒ³ã¯1æ—¥1000ãƒªã‚¯ã‚¨ã‚¹ãƒˆ)
  2. https://pokeapi.co/
    - ãƒã‚±ãƒ¢ãƒ³åŸºæœ¬æƒ…å ±ã®ã¿(ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ã§ã¯ãªã„)

  å®Ÿè£…ä¾‹

  // lib/pokemon-tcg-api.ts
  const POKEMON_TCG_API = 'https://api.pokemontcg.io/v2/cards'

  export async function getCardByNumber(
    cardNumber: string, 
    languageCode: string = 'ja'
  ): Promise<CardData> {
    const response = await fetch(
      `${POKEMON_TCG_API}/${cardNumber}?language=${languageCode}`
    )
    const data = await response.json()
    return {
      id: data.id,
      name: data.name,
      image_url: data.images.large,
      // ...
    }
  }

  ãƒ¡ãƒªãƒƒãƒˆ

  - âœ… å®Ÿè£…ãŒæœ€ã‚‚ç°¡å˜(ãƒ‡ãƒ¼ã‚¿æŠ•å…¥ä¸è¦)
  - âœ… è‡ªå‹•çš„ã«æœ€æ–°ã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’å–å¾—
  - âœ… ç”»åƒãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ä¸è¦

  ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

  - âŒ å¤–éƒ¨APIä¾å­˜(éšœå®³ãƒªã‚¹ã‚¯)
  - âŒ ãƒ¬ã‚¹ãƒãƒ³ã‚¹é€Ÿåº¦ãŒé…ã„å¯èƒ½æ€§
  - âŒ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ€§ãŒä½ã„

  ---
  ğŸ“Œ ã‚ªãƒ—ã‚·ãƒ§ãƒ³C: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼(ç¾å®Ÿçš„ãªæŠ˜è¡·æ¡ˆ)

  å®Ÿè£…æ¦‚è¦

  1. ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿: cardsãƒ†ãƒ¼ãƒ–ãƒ«ã«card_number(å›½éš›å…±é€šID)ã‚’è¿½åŠ 
  2. ç”»åƒURLç”Ÿæˆ: è¦å‰‡çš„ãªURLå‘½åè¦å‰‡ã‚’åˆ©ç”¨
  3. åç§°ç¿»è¨³: è»½é‡ç¿»è¨³ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ä½¿ç”¨

  ã‚«ãƒ¼ãƒ‰ç”»åƒURLè¦å‰‡

  // å¤šãã®ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ã‚µã‚¤ãƒˆã¯è¨€èªã‚³ãƒ¼ãƒ‰ä»˜ãURLã‚’ä½¿ç”¨
  function getCardImageUrl(cardNumber: string, lang: string): string {
    // ä¾‹: Pokemonå…¬å¼ã‚„Game8ãªã©ã®ãƒ‘ã‚¿ãƒ¼ãƒ³
    return `https://example.com/cards/${lang}/${cardNumber}.png`
  }

  // ä½¿ç”¨ä¾‹
  getCardImageUrl('SV1-001', 'en')
  // â†’ https://example.com/cards/en/SV1-001.png

  getCardImageUrl('SV1-001', 'ja')
  // â†’ https://example.com/cards/ja/SV1-001.png

  ã‚«ãƒ¼ãƒ‰åç¿»è¨³ãƒãƒƒãƒ”ãƒ³ã‚°

  // locales/cards/ja.json
  {
    "SV1-001": "ãƒ”ã‚«ãƒãƒ¥ã‚¦ex",
    "SV1-002": "ãƒ©ã‚¤ãƒãƒ¥ã‚¦"
  }

  // locales/cards/en.json
  {
    "SV1-001": "Pikachu ex",
    "SV1-002": "Raichu"
  }

  ãƒ¡ãƒªãƒƒãƒˆ

  - âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è² è·ãŒå°ã•ã„
  - âœ… å¤–éƒ¨APIä¾å­˜ãªã—(ç”»åƒCDNåˆ©ç”¨)
  - âœ… é«˜é€Ÿãƒ¬ã‚¹ãƒãƒ³ã‚¹(é™çš„ãƒ•ã‚¡ã‚¤ãƒ«)

  ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

  - âŒ ã‚«ãƒ¼ãƒ‰åç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ã®ç®¡ç†ãŒå¿…è¦
  - âŒ ç”»åƒURLè¦å‰‡ãŒå¤‰ã‚ã‚‹ã¨ãƒ¡ãƒ³ãƒ†ãŒå¿…è¦

  ---
  ğŸ¯ æ¨å¥¨å®Ÿè£…ãƒ—ãƒ©ãƒ³: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼ + next-intl

  ãƒ•ã‚§ãƒ¼ã‚º1: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æº–å‚™

  -- 1. cardsãƒ†ãƒ¼ãƒ–ãƒ«ã«card_numberè¿½åŠ 
  ALTER TABLE cards ADD COLUMN card_number VARCHAR UNIQUE;
  ALTER TABLE cards ADD COLUMN set_code VARCHAR;

  -- 2. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã«card_numberã‚’è¨­å®š(ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä¸€æ‹¬æ›´æ–°)
  UPDATE cards SET card_number = 'SV1-' || LPAD(id::text, 3, '0');

  ãƒ•ã‚§ãƒ¼ã‚º2: å¤šè¨€èªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å°å…¥

  npm install next-intl

  ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ :
  /locales
    /en
      common.json      # UIç¿»è¨³
      cards.json       # ã‚«ãƒ¼ãƒ‰åç¿»è¨³
    /ja
      common.json
      cards.json
    /zh-CN
      common.json
      cards.json

  ã‚«ãƒ¼ãƒ‰åç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ:
  // scripts/generate-card-translations.ts
  // Supabaseã‹ã‚‰å…¨ã‚«ãƒ¼ãƒ‰ã‚’å–å¾— â†’ ChatGPT APIã§ç¿»è¨³ â†’ JSONå‡ºåŠ›

  ãƒ•ã‚§ãƒ¼ã‚º3: ã‚«ãƒ¼ãƒ‰ç”»åƒURLæˆ¦ç•¥

  ãƒ‘ã‚¿ãƒ¼ãƒ³1: è¨€èªåˆ¥CDN
  // lib/card-image-url.ts
  export function getCardImageUrl(
    cardNumber: string, 
    language: string
  ): string {
    const baseUrl = process.env.NEXT_PUBLIC_CARD_IMAGE_CDN
    return `${baseUrl}/${language}/${cardNumber}.png`
  }

  ãƒ‘ã‚¿ãƒ¼ãƒ³2: Pokemon TCG APIã‚’ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
  export async function getCardImageUrl(
    cardNumber: string,
    language: string
  ): Promise<string> {
    // 1. ã¾ãšCDNã‹ã‚‰å–å¾—ã‚’è©¦ã¿ã‚‹
    const cdnUrl = `${CDN_BASE}/${language}/${cardNumber}.png`

    // 2. CDNã«å­˜åœ¨ã—ãªã„å ´åˆã¯APIã‹ã‚‰å–å¾—
    try {
      const response = await fetch(cdnUrl, { method: 'HEAD' })
      if (response.ok) return cdnUrl
    } catch {}

    // 3. Pokemon TCG APIã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    const apiData = await fetchFromPokemonTCGAPI(cardNumber, language)
    return apiData.images.large
  }

  ãƒ•ã‚§ãƒ¼ã‚º4: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¿®æ­£

  // components/card-display.tsx
  import { useTranslations } from 'next-intl'
  import { getCardImageUrl } from '@/lib/card-image-url'

  export function CardDisplay({ cardNumber }: { cardNumber: string }) {
    const t = useTranslations('cards')
    const locale = useLocale() // 'ja' | 'en' | 'zh-CN' etc.

    const cardName = t(cardNumber) // locales/ja/cards.json ã‹ã‚‰å–å¾—
    const imageUrl = getCardImageUrl(cardNumber, locale)

    return (
      <img src={imageUrl} alt={cardName} />
    )
  }

  ---
  ğŸ’° ã‚³ã‚¹ãƒˆè©¦ç®—

  | é …ç›®      | ã‚ªãƒ—ã‚·ãƒ§ãƒ³A    | ã‚ªãƒ—ã‚·ãƒ§ãƒ³B       | ã‚ªãƒ—ã‚·ãƒ§ãƒ³C(æ¨å¥¨)  |
  |---------|-----------|--------------|-------------|
  | åˆæœŸé–‹ç™º    | 15-20äººæ—¥   | 5-7äººæ—¥        | 8-12äººæ—¥      |
  | ãƒ‡ãƒ¼ã‚¿æŠ•å…¥   | 5-10äººæ—¥    | 0äººæ—¥          | 2-3äººæ—¥       |
  | æœˆé¡ãƒ©ãƒ³ãƒ‹ãƒ³ã‚° | $0(DBå®¹é‡å¢—) | $0-50(APIåˆ¶é™) | $0(CDNè²»ç”¨ã®ã¿) |
  | ä¿å®ˆæ€§     | é«˜         | ä½(APIä¾å­˜)     | ä¸­           |

  ---
  ğŸš€ å…·ä½“çš„ãªå®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—(ã‚ªãƒ—ã‚·ãƒ§ãƒ³Cæ¡ç”¨æ™‚)

  ã‚¹ãƒ†ãƒƒãƒ—1: ã‚«ãƒ¼ãƒ‰ç”»åƒåé›†(æœ€å¤§ã®èª²é¡Œ)

  æ–¹æ³•A: å…¬å¼ã‚½ãƒ¼ã‚¹ã‹ã‚‰ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°
  // scripts/scrape-card-images.ts
  // Pokemonå…¬å¼ã‚µã‚¤ãƒˆã€Game8ç­‰ã‹ã‚‰å„è¨€èªã®ç”»åƒã‚’åé›†
  // â†’ Cloudflare R2ã‚„S3ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

  æ–¹æ³•B: Pokemon TCG APIåˆ©ç”¨
  # å…¨ã‚«ãƒ¼ãƒ‰ã®ç”»åƒURLã‚’å–å¾—ã—ã¦ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
  node scripts/fetch-pokemon-tcg-images.js

  æ–¹æ³•C: æ—¢å­˜ã®æ—¥æœ¬èªç”»åƒã‹ã‚‰æ©Ÿæ¢°ç¿»è¨³ã§ç”»åƒç”Ÿæˆ
  - OCRã§æ—¥æœ¬èªã‚«ãƒ¼ãƒ‰ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º
  - å„è¨€èªã«ç¿»è¨³
  - ç”»åƒåˆæˆã§ç¿»è¨³ç‰ˆã‚«ãƒ¼ãƒ‰ç”»åƒç”Ÿæˆ
  - âš ï¸ è‘—ä½œæ¨©å•é¡Œã«æ³¨æ„(éæ¨å¥¨)

  ã‚¹ãƒ†ãƒƒãƒ—2: ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ

  // scripts/generate-translations.ts
  import { supabase } from './supabase'
  import { OpenAI } from 'openai'

  const openai = new OpenAI()

  async function generateCardTranslations() {
    const { data: cards } = await supabase
      .from('cards')
      .select('card_number, name')

    const languages = ['en', 'zh-CN', 'ko', 'es']

    for (const lang of languages) {
      const translations = {}

      for (const card of cards) {
        const translation = await openai.chat.completions.create({
          model: 'gpt-4',
          messages: [{
            role: 'user',
            content: `Translate this Pokemon card name to ${lang}: ${card.name}`
          }]
        })

        translations[card.card_number] = translation.choices[0].message.content
      }

      // locales/${lang}/cards.json ã«æ›¸ãè¾¼ã¿
      fs.writeFileSync(
        `locales/${lang}/cards.json`,
        JSON.stringify(translations, null, 2)
      )
    }
  }

  ã‚³ã‚¹ãƒˆ: 1000ã‚«ãƒ¼ãƒ‰ Ã— 4è¨€èª Ã— $0.01 = ç´„$40

  ã‚¹ãƒ†ãƒƒãƒ—3: UIç¿»è¨³

  # æ—¢å­˜ã®æ—¥æœ¬èªUIæ–‡è¨€ã‚’æŠ½å‡º
  node scripts/extract-japanese-strings.js

  # ChatGPTã§ä¸€æ‹¬ç¿»è¨³
  node scripts/translate-ui-strings.js

  ---
  ğŸ“ æœ€çµ‚æ¨å¥¨æ§‹æˆ

  âœ… next-intl (UIå¤šè¨€èªåŒ–)
  âœ… ã‚«ãƒ¼ãƒ‰åç¿»è¨³JSONãƒ•ã‚¡ã‚¤ãƒ« (locales/{lang}/cards.json)
  âœ… è¨€èªåˆ¥ã‚«ãƒ¼ãƒ‰ç”»åƒCDN (Cloudflare R2æ¨å¥¨ã€æœˆ$0-5)
  âœ… Pokemon TCG APIãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ (ç„¡æ–™ãƒ—ãƒ©ãƒ³)
  âœ… Google Cloud Translation API (ã‚³ãƒ¡ãƒ³ãƒˆç¿»è¨³ã€æœˆ$10-50)

  ç·ã‚³ã‚¹ãƒˆ: åˆæœŸ$40 + æœˆé¡$10-55
  é–‹ç™ºæœŸé–“: 2-3é€±é–“

  ---
  ã“ã®æ–¹å¼ãªã‚‰ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å¤§å¹…å¤‰æ›´ãªã—ã§å¤šè¨€èªå¯¾å¿œãŒå¯èƒ½ã§ã™ã€‚ä½•ã‹è³ªå•ãŒã‚ã‚Œã°ãŠçŸ¥ã‚‰ã›ãã ã•ã„!