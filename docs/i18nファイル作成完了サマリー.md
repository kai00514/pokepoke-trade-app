# i18nファイル作成完了サマリー

**作成日**: 2025-11-22
**ステータス**: 完了

## 📋 作業概要

コードベース全体から網羅的に固定テキストを抽出し、全言語対応のi18nファイル構造を作成しました。

---

## ✅ 完了した作業

### 1. コードベース調査
- `/app`配下（`/admin`除く）の全ページ・コンポーネントを調査
- `/components`配下（`/admin`除く）の全コンポーネントを調査
- 合計**300以上のテキストエントリー**を抽出

### 2. テキスト分類
抽出したテキストを以下のカテゴリに分類：

| カテゴリ | 件数 | 内容 |
|---------|------|------|
| Navigation | 8件 | ナビゲーションメニュー、戻るリンク |
| Buttons | 60+件 | ボタンラベル、アクション |
| Forms | 40+件 | ラベル、プレースホルダー、ヘルパーテキスト |
| Errors | 60+件 | 認証、バリデーション、APIエラー |
| Validation | 4件 | パスワード表示切り替え等 |
| Messages | 40+件 | 成功、情報、警告メッセージ |
| Pages | 8セクション | ページタイトル、サブタイトル、コンテンツ |
| Components | 7セクション | コンポーネント固有のテキスト |
| Cards | 22件 | カードタイプ、レアリティ |

### 3. i18nファイル構造設計

```
/locales
  ├── ja/          # 日本語（マスター）
  ├── en/          # 英語
  ├── zh-cn/       # 簡体中文
  ├── zh-tw/       # 繁體中文
  ├── pt-br/       # Português (Brasil)
  ├── fr/          # Français
  ├── it/          # Italiano
  ├── de/          # Deutsch
  └── es/          # Español
```

各言語ディレクトリには以下の7ファイル：

1. **common.json** - 共通UI要素
   - ナビゲーション
   - ボタン
   - ラベル
   - ヘッダー・フッター
   - 言語名

2. **auth.json** - 認証関連
   - ログイン
   - サインアップ
   - パスワードリセット
   - ログインプロンプトモーダル

3. **forms.json** - フォーム関連
   - 認証フォーム
   - トレード投稿フォーム
   - リスト作成フォーム
   - 検索フォーム
   - コラージュフォーム
   - お問い合わせフォーム

4. **errors.json** - エラーメッセージ
   - 認証エラー
   - バリデーションエラー
   - トレード投稿エラー
   - データ取得エラー
   - リスト作成エラー
   - コラージュ生成エラー

5. **messages.json** - 通知メッセージ
   - 成功メッセージ
   - 情報メッセージ
   - 警告メッセージ

6. **pages.json** - ページコンテンツ
   - ホーム
   - ログイン・サインアップ・リセット
   - トレード投稿作成
   - リスト作成
   - コラージュ
   - お問い合わせ
   - シェアモーダル
   - 詳細検索

7. **cards.json** - カード関連
   - カテゴリー（ポケモン、トレーナーズ等）
   - タイプ（草、炎、水等）
   - レアリティ（ダイヤ、星、クラウン等）
   - パック
   - フィルター

### 4. ファイル作成状況

| 言語 | ファイル数 | ステータス |
|------|-----------|----------|
| **ja** (日本語) | 7 | ✅ 完成（マスター） |
| **en** (英語) | 7 | ✅ 構造コピー完了 |
| **zh-cn** (簡体中文) | 7 | ✅ 構造コピー完了 |
| **zh-tw** (繁體中文) | 7 | ✅ 構造コピー完了 |
| **pt-br** (Português) | 7 | ✅ 構造コピー完了 |
| **fr** (Français) | 7 | ✅ 構造コピー完了 |
| **it** (Italiano) | 7 | ✅ 構造コピー完了 |
| **de** (Deutsch) | 7 | ✅ 構造コピー完了 |
| **es** (Español) | 7 | ✅ 構造コピー完了 |

**合計**: 9言語 × 7ファイル = **63ファイル**

### 5. docsディレクトリ整理

以下のファイル名を日本語に変更：

| 旧ファイル名 | 新ファイル名 |
|-------------|-------------|
| `20-cards-implementation-plan.md` | `20枚カード実装計画.md` |
| `collage-feature-design.md` | `コラージュ機能設計.md` |
| `database-schema-changes-multilingual.md` | `データベーススキーマ変更-多言語対応.md` |
| `info-revalidate.md` | `情報再検証.md` |
| `multilingual-schema-changes-summary.md` | `多言語スキーマ変更サマリー.md` |
| `multilingual-support-design.md` | `多言語対応設計.md` |
| `multilingual-tables-summary.md` | `多言語テーブルサマリー.md` |
| `user-language-detection-options.md` | `ユーザー言語検出オプション.md` |

---

## 📁 ファイル構造

```
pokepoke-trade-app/
├── locales/
│   ├── ja/
│   │   ├── common.json       (完成・マスター)
│   │   ├── auth.json         (完成・マスター)
│   │   ├── forms.json        (完成・マスター)
│   │   ├── errors.json       (完成・マスター)
│   │   ├── messages.json     (完成・マスター)
│   │   ├── pages.json        (完成・マスター)
│   │   └── cards.json        (完成・マスター)
│   ├── en/                   (日本語から構造コピー)
│   ├── zh-cn/                (日本語から構造コピー)
│   ├── zh-tw/                (日本語から構造コピー)
│   ├── pt-br/                (日本語から構造コピー)
│   ├── fr/                   (日本語から構造コピー)
│   ├── it/                   (日本語から構造コピー)
│   ├── de/                   (日本語から構造コピー)
│   └── es/                   (日本語から構造コピー)
└── docs/
    ├── 20枚カード実装計画.md
    ├── コラージュ機能設計.md
    ├── データベーススキーマ変更-多言語対応.md
    ├── データベース初期構想.md
    ├── 情報再検証.md
    ├── 多言語スキーマ変更サマリー.md
    ├── 多言語対応設計.md
    ├── 多言語テーブルサマリー.md
    ├── ユーザー言語検出オプション.md
    └── i18nファイル作成完了サマリー.md (このファイル)
```

---

## 🔍 i18nファイルの使い方例

### 基本的な使用方法

```typescript
import { useTranslations } from 'next-intl'; // or your i18n library

function MyComponent() {
  const t = useTranslations();

  return (
    <div>
      <h1>{t('pages.home.title')}</h1>
      <button>{t('buttons.submit')}</button>
      <p>{t('messages.success.loginSuccessMessage')}</p>
    </div>
  );
}
```

### キーの構造例

```typescript
// common.json
t('navigation.home')              // "ホーム"
t('buttons.login')                // "ログイン"

// auth.json
t('login.title')                  // "ログイン"
t('signup.subtitle')              // "アカウントを作成して..."

// forms.json
t('auth.email.label')             // "メールアドレス"
t('auth.password.placeholder')    // "あなたのパスワード"

// errors.json
t('auth.invalidCredentials')      // "メールアドレスまたは..."
t('validation.emptyTitle')        // "トレード目的を入力..."

// messages.json
t('success.loginSuccess')         // "ログイン成功"
t('info.tradeNotice')            // "ここで登録された内容は..."

// pages.json
t('home.title')                   // "PokeLink トレード掲示板"
t('contact.faq.q1')              // "Q. 返信までどのくらい..."

// cards.json
t('types.fire')                   // "炎"
t('rarities.star3')              // "星3"
```

### 動的値の使用

```typescript
// メッセージに変数を埋め込む場合
t('messages.info.cardsSelected', { count: 5 })
// → "5枚のカードが選択されています"

t('validation.maxSelection', { maxSelection: 20 })
// → "最大20枚まで選択できます。"

t('pages.home.resultCount', {
  totalCount: 100,
  start: 1,
  end: 20
})
// → "全100件中 1〜20件を表示"
```

---

## 🚀 次のステップ

### 1. i18nライブラリのセットアップ
- [ ] next-intl または next-i18next をインストール
- [ ] i18n設定ファイルを作成
- [ ] Middlewareでの言語判定を実装

### 2. 翻訳作業
- [ ] 英語版（en）の翻訳
- [ ] 中国語簡体字版（zh-cn）の翻訳
- [ ] 中国語繁体字版（zh-tw）の翻訳
- [ ] ポルトガル語版（pt-br）の翻訳
- [ ] フランス語版（fr）の翻訳
- [ ] イタリア語版（it）の翻訳
- [ ] ドイツ語版（de）の翻訳
- [ ] スペイン語版（es）の翻訳

**翻訳方法の選択肢**:
- AWS Translate（コスト重視）
- DeepL API（品質重視）
- 手動翻訳（最高品質）
- ハイブリッド（重要箇所は手動、その他は自動）

### 3. コード内の文字列をi18nキーに置き換え
現在のコード内のハードコードされた文字列を、i18nキーに置き換える作業が必要です。

**置き換え対象ファイル例**:
- `app/auth/login/page.tsx`
- `app/auth/signup/page.tsx`
- `app/trades/create/page.tsx`
- `app/lists/create/page.tsx`
- `components/layout/header.tsx`
- `components/footer.tsx`
- `components/trade-post-card.tsx`
- 等々（約50ファイル）

**置き換え例**:
```tsx
// Before
<h1>ログイン</h1>

// After
<h1>{t('auth.login.title')}</h1>
```

### 4. 言語切り替えUIの実装
- [ ] ヘッダーに言語切り替えドロップダウンを追加
- [ ] 初回訪問時の言語選択モーダル（必要に応じて）
- [ ] 言語設定の永続化（Cookie/LocalStorage）

### 5. テスト
- [ ] 各言語での表示確認
- [ ] 長いテキストのレイアウト崩れチェック
- [ ] 動的値の埋め込みテスト
- [ ] フォールバック言語のテスト

---

## 📊 統計情報

### 抽出されたテキスト統計

| 項目 | 数値 |
|------|------|
| 総テキストエントリー数 | 300+ |
| 調査ファイル数 | 約70ファイル |
| i18nファイル総数 | 63ファイル |
| 対応言語数 | 9言語 |
| JSONキー総数（1言語あたり） | 約250キー |

### ファイルサイズ（日本語版）

| ファイル | サイズ（概算） | キー数（概算） |
|---------|--------------|---------------|
| common.json | 3KB | 50キー |
| auth.json | 1.5KB | 15キー |
| forms.json | 2.5KB | 35キー |
| errors.json | 4KB | 60キー |
| messages.json | 3KB | 40キー |
| pages.json | 3.5KB | 40キー |
| cards.json | 1KB | 25キー |
| **合計** | **約18.5KB** | **約265キー** |

---

## 🎯 設計上の重要なポイント

### 1. 階層構造
- トップレベル: 機能カテゴリ（auth, trade, list等）
- 第2レベル: 具体的な項目（title, subtitle, label等）
- 最大3階層まで（深すぎない設計）

### 2. 命名規則
- キー名は英語（camelCase）
- 意味が明確（`loginButton`より`buttons.login`）
- 再利用可能な構造

### 3. ファイル分割方針
- 機能別に分割（auth, forms, errors等）
- 1ファイルは500行以内を目安
- 関連する項目は同じファイルに

### 4. 変数の扱い
- 動的値は`{変数名}`で埋め込み
- 例: `"選択されたカード: {count}枚"`
- i18nライブラリの補間機能を利用

---

## 💡 ベストプラクティス

### コード内での使用
```tsx
// ✅ Good
const t = useTranslations();
<button>{t('buttons.submit')}</button>

// ❌ Bad (ハードコード)
<button>登録する</button>
```

### 動的コンテンツ
```tsx
// ✅ Good
<p>{t('messages.info.cardsSelected', { count })}</p>

// ❌ Bad (テンプレートリテラル)
<p>{count}枚のカードが選択されています</p>
```

### 条件分岐
```tsx
// ✅ Good
<span>{isLoading ? t('buttons.submitting') : t('buttons.submit')}</span>

// ❌ Bad
<span>{isLoading ? '登録中...' : '登録する'}</span>
```

---

## 📝 メモ

### 除外された項目
- `/admin`配下の全ファイル（日本人開発者専用）
- APIルートのレスポンスメッセージ（一部含む）
- データベースから取得する動的コンテンツ（カード名、デッキタイトル等）
- Console.logメッセージ
- コード内コメント

### 将来的な拡張
- より多くの言語への対応
- 地域別バリエーション（en-US, en-GB等）
- 翻訳管理プラットフォームの導入検討（Crowdin, Lokalise等）
- 自動翻訳パイプラインの構築

---

**作成者**: Claude Code
**完了日**: 2025-11-22
