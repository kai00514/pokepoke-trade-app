# ãƒ†ã‚¹ãƒˆç’°å¢ƒæ§‹ç¯‰æ‰‹é †

**ä½œæˆæ—¥**: 2025-11-22
**å¯¾è±¡ãƒ–ãƒ©ãƒ³ãƒ**: `feature/i18n-test-environment`
**ç›®çš„**: i18nå¯¾å¿œã®ãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒãƒƒã‚°ã‚’è¡Œã†ãŸã‚ã®ç‹¬ç«‹ã—ãŸç’°å¢ƒæ§‹ç¯‰

---

## ğŸ“‹ æ¦‚è¦

æœ¬ç•ªç’°å¢ƒã«å½±éŸ¿ã‚’ä¸ãˆãšã«i18nå¯¾å¿œã®é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ãŸã‚ã€ä»¥ä¸‹ã‚’æ§‹ç¯‰ã—ã¾ã™ï¼š

1. Supabaseãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
2. Vercelãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒï¼‰
3. i18nãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

---

## ã‚¹ãƒ†ãƒƒãƒ—1: Supabaseãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½œæˆ

### 1.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è¤‡è£½

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³A: æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆï¼ˆæ¨å¥¨ï¼‰

1. **Supabase Dashboardã«ã‚¢ã‚¯ã‚»ã‚¹**
   - https://app.supabase.com ã«ãƒ­ã‚°ã‚¤ãƒ³

2. **æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ**
   - Organization: æ—¢å­˜ã®ã‚‚ã®ã‚’é¸æŠ
   - Project name: `pokepoke-trade-app-test` ã¾ãŸã¯ `pokepoke-i18n-test`
   - Database Password: å¼·åŠ›ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®šï¼ˆä¿å­˜ã—ã¦ãŠãï¼‰
   - Region: æœ¬ç•ªã¨åŒã˜ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠï¼ˆä¾‹: Northeast Asia (Tokyo)ï¼‰

3. **ä½œæˆå®Œäº†ã‚’å¾…ã¤**
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸåŒ–ã«æ•°åˆ†ã‹ã‹ã‚Šã¾ã™

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³B: æ—¢å­˜DBã‚’ãƒ€ãƒ³ãƒ—ã—ã¦å¾©å…ƒ

```bash
# æœ¬ç•ªDBã‹ã‚‰ãƒ€ãƒ³ãƒ—ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œï¼‰
pg_dump -h <æœ¬ç•ªDB_HOST> -U postgres -d postgres --clean --if-exists > backup.sql

# ãƒ†ã‚¹ãƒˆDBã«å¾©å…ƒ
psql -h <ãƒ†ã‚¹ãƒˆDB_HOST> -U postgres -d postgres < backup.sql
```

### 1.2 ã‚¹ã‚­ãƒ¼ãƒã®ã‚³ãƒ”ãƒ¼

1. **Supabase Dashboard > SQL Editor**ã§å®Ÿè¡Œ:

```sql
-- ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ã®ã¿ã‚³ãƒ”ãƒ¼ã™ã‚‹å ´åˆ
-- æœ¬ç•ªç’°å¢ƒã®SQL Editorã§ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
-- ãƒ†ã‚¹ãƒˆç’°å¢ƒã§å®Ÿè¡Œ
```

2. **ã¾ãŸã¯ã€Supabase CLIã‚’ä½¿ç”¨**:

```bash
# Supabase CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g supabase

# æœ¬ç•ªç’°å¢ƒã‹ã‚‰ã‚¹ã‚­ãƒ¼ãƒã‚’å–å¾—
supabase db dump --db-url "postgresql://..." > schema.sql

# ãƒ†ã‚¹ãƒˆç’°å¢ƒã«é©ç”¨
psql -h <ãƒ†ã‚¹ãƒˆDB_HOST> -U postgres -d postgres < schema.sql
```

### 1.3 ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

```sql
-- å¿…è¦æœ€å°é™ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥
-- ä¾‹: ã‚«ãƒ¼ãƒ‰ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã€ãƒ‘ãƒƒã‚¯æƒ…å ±ãªã©
INSERT INTO cards (name, image_url, ...) VALUES (...);
INSERT INTO packs (name, release_date, ...) VALUES (...);
```

### 1.4 èªè¨¼æƒ…å ±ã®å–å¾—

1. **Project Settings > API**ã‹ã‚‰ä»¥ä¸‹ã‚’ã‚³ãƒ”ãƒ¼:
   - Project URL (ä¾‹: `https://xxxxx.supabase.co`)
   - Project API keys > `anon` `public` key
   - Project API keys > `service_role` `secret` keyï¼ˆå¿…è¦ãªå ´åˆï¼‰

2. **Database > Connection string**ã‹ã‚‰:
   - Connection pooling URIï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ¥ç¶šç”¨ï¼‰
   - Direct connection URIï¼ˆãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰

---

## ã‚¹ãƒ†ãƒƒãƒ—2: Vercelãƒ†ã‚¹ãƒˆç’°å¢ƒã®ä½œæˆ

### 2.1 Vercel Dashboardã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒã‚’è¨­å®š

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³A: æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆ©ç”¨ï¼ˆæ¨å¥¨ï¼‰

1. **Vercel Dashboard**ã«ã‚¢ã‚¯ã‚»ã‚¹
   - https://vercel.com/dashboard

2. **æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ**
   - `pokepoke-trade-app` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã

3. **Settings > Environment Variables**
   - ã€ŒEnvironmentã€ã§ **Preview** ã‚’é¸æŠ
   - ãƒ†ã‚¹ãƒˆç’°å¢ƒç”¨ã®ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ :

```env
# Supabase (Test Environment)
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGc...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGc... (å¿…è¦ãªå ´åˆ)

# Environment Identifier
NEXT_PUBLIC_ENV=test
```

4. **BranchæŒ‡å®š**
   - ã€ŒGit Branchã€ã§ `feature/i18n-test-environment` ã‚’æŒ‡å®š
   - ã“ã®ãƒ–ãƒ©ãƒ³ãƒã®ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ä¸Šè¨˜ç’°å¢ƒå¤‰æ•°ãŒä½¿ç”¨ã•ã‚Œã¾ã™

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³B: æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

1. **Vercel Dashboard > Add New > Project**

2. **Import Git Repository**
   - æ—¢å­˜ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠ
   - ã¾ãŸã¯æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯

3. **Configure Project**
   - Project Name: `pokepoke-trade-app-test`
   - Framework Preset: Next.js
   - Root Directory: `./` (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)

4. **Environment Variables**ã‚’è¨­å®š
   - ä¸Šè¨˜ã¨åŒã˜ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ 

### 2.2 ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š

1. **Settings > Git**
   - Production Branch: `main`ï¼ˆãã®ã¾ã¾ï¼‰
   - Preview Branches: ã™ã¹ã¦ã®ãƒ–ãƒ©ãƒ³ãƒã‚’æœ‰åŠ¹åŒ–

2. **Settings > Domains**ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
   - ãƒ†ã‚¹ãƒˆç’°å¢ƒç”¨ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨­å®š
   - ä¾‹: `test.yourdomain.com` ã¾ãŸã¯ `i18n-test.yourdomain.com`

---

## ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®è¨­å®š

### 3.1 ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

```bash
# .env.local.test ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆã¾ãŸã¯æ–°è¦ä½œæˆï¼‰
cp .env.local .env.local.test
```

### 3.2 .env.local.test ã®ç·¨é›†

```env
# Supabase (Test Environment)
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGc...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGc...

# Environment Identifier
NEXT_PUBLIC_ENV=test

# ãã®ä»–ã®è¨­å®šã¯æœ¬ç•ªã¨åŒã˜
```

### 3.3 .gitignore ã®ç¢ºèª

```.gitignore
# ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ãŒç„¡è¦–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
.env.local
.env.local.test
.env*.local
```

### 3.4 ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã®èµ·å‹•

```bash
# ãƒ†ã‚¹ãƒˆç’°å¢ƒå¤‰æ•°ã‚’ä½¿ç”¨ã—ã¦èµ·å‹•
cp .env.local.test .env.local
pnpm dev

# ã¾ãŸã¯ã€ç’°å¢ƒå¤‰æ•°ã‚’ç›´æ¥æŒ‡å®š
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co pnpm dev
```

---

## ã‚¹ãƒ†ãƒƒãƒ—4: i18nãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### 4.1 next-intl ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰

```bash
pnpm add next-intl
```

**next-intlã‚’é¸ã¶ç†ç”±**:
- Next.js 13+ App Routerã«æœ€é©åŒ–
- ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¯¾å¿œ
- å‹å®‰å…¨æ€§ãŒé«˜ã„
- ã‚·ãƒ³ãƒ—ãƒ«ãªè¨­å®š

### 4.2 ã¾ãŸã¯ next-i18next ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pnpm add next-i18next react-i18next i18next
```

**next-i18nextã‚’é¸ã¶ç†ç”±**:
- ã‚ˆã‚Šè±Šå¯Œãªæ©Ÿèƒ½
- å¤§è¦æ¨¡ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«é©ã—ã¦ã„ã‚‹
- å®Ÿç¸¾ãŒè±Šå¯Œ

### 4.3 å‹å®šç¾©ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pnpm add -D @types/node
```

---

## ã‚¹ãƒ†ãƒƒãƒ—5: i18nè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

### 5.1 i18nè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆnext-intlã®å ´åˆï¼‰

#### `/i18n.ts` ã‚’ä½œæˆ

```typescript
import { getRequestConfig } from 'next-intl/server';
import { notFound } from 'next/navigation';

// å¯¾å¿œè¨€èª
export const locales = ['ja', 'en', 'zh-cn', 'zh-tw', 'pt-br', 'fr', 'it', 'de', 'es'] as const;
export type Locale = (typeof locales)[number];

export const defaultLocale: Locale = 'ja';

// è¨€èªåã®è¡¨ç¤ºç”¨
export const localeNames: Record<Locale, string> = {
  'ja': 'æ—¥æœ¬èª',
  'en': 'English',
  'zh-cn': 'ç®€ä½“ä¸­æ–‡',
  'zh-tw': 'ç¹é«”ä¸­æ–‡',
  'pt-br': 'PortuguÃªs (Brasil)',
  'fr': 'FranÃ§ais',
  'it': 'Italiano',
  'de': 'Deutsch',
  'es': 'EspaÃ±ol',
};

export default getRequestConfig(async ({ locale }) => {
  // æœ‰åŠ¹ãªè¨€èªã‹ãƒã‚§ãƒƒã‚¯
  if (!locales.includes(locale as Locale)) {
    notFound();
  }

  return {
    messages: (await import(`./locales/${locale}/common.json`)).default,
  };
});
```

### 5.2 Middlewareè¨­å®š

#### `/middleware.ts` ã‚’ä½œæˆ

```typescript
import createMiddleware from 'next-intl/middleware';
import { locales, defaultLocale } from './i18n';

export default createMiddleware({
  // ã‚µãƒãƒ¼ãƒˆã™ã‚‹è¨€èª
  locales,

  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨€èª
  defaultLocale,

  // URLæˆ¦ç•¥: 'as-needed' = ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨€èªã®å ´åˆã¯ãƒ‘ã‚¹ã«è¨€èªã‚³ãƒ¼ãƒ‰ã‚’å«ã‚ãªã„
  localePrefix: 'as-needed',
});

export const config = {
  // i18nã‚’é©ç”¨ã—ãªã„ãƒ‘ã‚¹
  matcher: [
    // å…¨ã¦ã®ãƒ‘ã‚¹ã«ãƒãƒƒãƒ
    '/((?!api|_next|_vercel|.*\\..*).*)',
  ],
};
```

### 5.3 App Routerè¨­å®š

#### `/app/[locale]/layout.tsx` ã‚’ä½œæˆ

```typescript
import { NextIntlClientProvider } from 'next-intl';
import { notFound } from 'next/navigation';
import { locales } from '@/i18n';

export function generateStaticParams() {
  return locales.map((locale) => ({ locale }));
}

export default async function LocaleLayout({
  children,
  params: { locale }
}: {
  children: React.ReactNode;
  params: { locale: string };
}) {
  // æœ‰åŠ¹ãªè¨€èªã‹ãƒã‚§ãƒƒã‚¯
  if (!locales.includes(locale as any)) {
    notFound();
  }

  let messages;
  try {
    messages = (await import(`@/locales/${locale}/common.json`)).default;
  } catch (error) {
    notFound();
  }

  return (
    <html lang={locale}>
      <body>
        <NextIntlClientProvider locale={locale} messages={messages}>
          {children}
        </NextIntlClientProvider>
      </body>
    </html>
  );
}
```

### 5.4 æ—¢å­˜ã®app/layout.tsxã‚’ç§»å‹•

```bash
# æ—¢å­˜ã®layout.tsxã‚’[locale]ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«ç§»å‹•
mkdir -p app/[locale]
mv app/layout.tsx app/[locale]/layout.tsx

# æ—¢å­˜ã®ãƒšãƒ¼ã‚¸ã‚‚ç§»å‹•
mv app/page.tsx app/[locale]/page.tsx
mv app/auth app/[locale]/auth
mv app/trades app/[locale]/trades
# ... ãã®ä»–ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚åŒæ§˜ã«ç§»å‹•
```

---

## ã‚¹ãƒ†ãƒƒãƒ—6: ä½¿ç”¨ä¾‹ã¨å‹•ä½œç¢ºèª

### 6.1 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ä½¿ç”¨

```typescript
'use client';

import { useTranslations } from 'next-intl';

export default function MyComponent() {
  const t = useTranslations();

  return (
    <div>
      <h1>{t('pages.home.title')}</h1>
      <button>{t('buttons.login')}</button>
      <p>{t('messages.success.loginSuccessMessage')}</p>
    </div>
  );
}
```

### 6.2 ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ä½¿ç”¨

```typescript
import { getTranslations } from 'next-intl/server';

export default async function ServerPage() {
  const t = await getTranslations();

  return (
    <div>
      <h1>{t('pages.home.title')}</h1>
    </div>
  );
}
```

### 6.3 è¨€èªåˆ‡ã‚Šæ›¿ãˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ

#### `/components/language-switcher.tsx`

```typescript
'use client';

import { useLocale } from 'next-intl';
import { useRouter, usePathname } from 'next/navigation';
import { locales, localeNames } from '@/i18n';

export default function LanguageSwitcher() {
  const locale = useLocale();
  const router = useRouter();
  const pathname = usePathname();

  const handleLocaleChange = (newLocale: string) => {
    // ç¾åœ¨ã®ãƒ‘ã‚¹ã‹ã‚‰è¨€èªã‚³ãƒ¼ãƒ‰ã‚’å–ã‚Šé™¤ã
    const pathWithoutLocale = pathname.replace(`/${locale}`, '');

    // æ–°ã—ã„è¨€èªã®ãƒ‘ã‚¹ã«åˆ‡ã‚Šæ›¿ãˆ
    router.push(`/${newLocale}${pathWithoutLocale}`);
  };

  return (
    <select
      value={locale}
      onChange={(e) => handleLocaleChange(e.target.value)}
      className="border rounded px-2 py-1"
    >
      {locales.map((loc) => (
        <option key={loc} value={loc}>
          {localeNames[loc]}
        </option>
      ))}
    </select>
  );
}
```

---

## ã‚¹ãƒ†ãƒƒãƒ—7: ãƒ–ãƒ©ãƒ³ãƒã®ãƒ—ãƒƒã‚·ãƒ¥ã¨Vercelãƒ‡ãƒ—ãƒ­ã‚¤

### 7.1 å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ

```bash
# å¤‰æ›´ã‚’ç¢ºèª
git status

# å…¨ã¦ã®å¤‰æ›´ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°
git add .

# ã‚³ãƒŸãƒƒãƒˆä½œæˆ
git commit -m "feat: setup i18n with next-intl

- Add i18n configuration files
- Setup middleware for locale routing
- Move app structure to [locale] directory
- Add language switcher component
- Configure test environment

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>"
```

### 7.2 ãƒªãƒ¢ãƒ¼ãƒˆã«ãƒ—ãƒƒã‚·ãƒ¥

```bash
# æ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒªãƒ¢ãƒ¼ãƒˆã«ãƒ—ãƒƒã‚·ãƒ¥
git push -u origin feature/i18n-test-environment
```

### 7.3 Vercelã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ç¢ºèª

1. **GitHubã«ãƒ—ãƒƒã‚·ãƒ¥å¾Œã€è‡ªå‹•çš„ã«VercelãŒãƒ‡ãƒ—ãƒ­ã‚¤ã‚’é–‹å§‹**
   - Vercel Dashboard > Deployments ã§é€²è¡ŒçŠ¶æ³ã‚’ç¢ºèª

2. **ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†å¾Œã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼URLã‚’ç¢ºèª**
   - ä¾‹: `https://pokepoke-trade-app-git-feature-i18n-xxxxx.vercel.app`

3. **ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚°ã‚’ç¢ºèª**
   - ã‚¨ãƒ©ãƒ¼ãŒãªã„ã‹ãƒã‚§ãƒƒã‚¯
   - ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ãŸã‹ç¢ºèª

### 7.4 ãƒ‡ãƒ—ãƒ­ã‚¤ã®ç¢ºèª

#### ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹

```
# ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼URL
https://pokepoke-trade-app-git-feature-i18n-xxxxx.vercel.app

# è¨€èªä»˜ãURL
https://pokepoke-trade-app-git-feature-i18n-xxxxx.vercel.app/en
https://pokepoke-trade-app-git-feature-i18n-xxxxx.vercel.app/zh-cn
```

#### ç¢ºèªé …ç›®

- [ ] ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] è¨€èªåˆ‡ã‚Šæ›¿ãˆãŒå‹•ä½œã™ã‚‹
- [ ] i18nã‚­ãƒ¼ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆæ—¥æœ¬èªã¨ã—ã¦ï¼‰
- [ ] Supabaseã¨ã®æ¥ç¶šãŒæ­£å¸¸
- [ ] èªè¨¼ãƒ•ãƒ­ãƒ¼ãŒå‹•ä½œã™ã‚‹
- [ ] ã‚¨ãƒ©ãƒ¼ãŒã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºã¦ã„ãªã„

---

## ã‚¹ãƒ†ãƒƒãƒ—8: ãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒãƒƒã‚°

### 8.1 ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ãƒ†ã‚¹ãƒˆ

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
pnpm dev

# ãƒ–ãƒ©ã‚¦ã‚¶ã§å„è¨€èªã‚’ãƒ†ã‚¹ãƒˆ
open http://localhost:3000
open http://localhost:3000/en
open http://localhost:3000/zh-cn
```

### 8.2 ãƒ†ã‚¹ãƒˆé …ç›®

#### åŸºæœ¬æ©Ÿèƒ½
- [ ] å…¨ãƒšãƒ¼ã‚¸ã§è¨€èªãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] è¨€èªåˆ‡ã‚Šæ›¿ãˆãŒå…¨ãƒšãƒ¼ã‚¸ã§å‹•ä½œã™ã‚‹
- [ ] URLã«è¨€èªã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã‚‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨€èªä»¥å¤–ï¼‰
- [ ] ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚‚è¨€èªãŒä¿æŒã•ã‚Œã‚‹

#### èªè¨¼æ©Ÿèƒ½
- [ ] ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ãŒç¿»è¨³ã•ã‚Œã‚‹
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç¿»è¨³ã•ã‚Œã‚‹
- [ ] æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç¿»è¨³ã•ã‚Œã‚‹

#### ãƒ•ã‚©ãƒ¼ãƒ 
- [ ] ãƒ©ãƒ™ãƒ«ãŒç¿»è¨³ã•ã‚Œã‚‹
- [ ] ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãŒç¿»è¨³ã•ã‚Œã‚‹
- [ ] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç¿»è¨³ã•ã‚Œã‚‹

#### ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®ãŒç¿»è¨³ã•ã‚Œã‚‹
- [ ] ãƒœã‚¿ãƒ³ãŒç¿»è¨³ã•ã‚Œã‚‹
- [ ] ãƒªãƒ³ã‚¯ãƒ†ã‚­ã‚¹ãƒˆãŒç¿»è¨³ã•ã‚Œã‚‹

### 8.3 ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«

#### ãƒ–ãƒ©ã‚¦ã‚¶é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«
```javascript
// ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¾åœ¨ã®è¨€èªã‚’ç¢ºèª
console.log(document.documentElement.lang);

// localeStorageã‚’ç¢ºèªï¼ˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã‚‹ï¼‰
console.log(localStorage.getItem('locale'));
```

#### Vercelãƒ­ã‚°ç¢ºèª
```bash
# Vercel CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm i -g vercel

# ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦æ¥ç¶š
vercel login
vercel link

# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ã‚’ç¢ºèª
vercel logs
```

---

## ã‚¹ãƒ†ãƒƒãƒ—9: ç¿»è¨³ä½œæ¥­ã®é–‹å§‹

### 9.1 ç¿»è¨³ã®å„ªå…ˆé †ä½

1. **æœ€å„ªå…ˆ**: è‹±èªï¼ˆenï¼‰
   - æœ€ã‚‚éœ€è¦ãŒé«˜ã„
   - ä»–è¨€èªã¸ã®æ©Ÿæ¢°ç¿»è¨³ã®ãƒ™ãƒ¼ã‚¹ã«ã‚‚ãªã‚‹

2. **é«˜**: ä¸­å›½èªç°¡ä½“å­—ï¼ˆzh-cnï¼‰ã€éŸ“å›½èªï¼ˆkoï¼‰
   - ã‚¢ã‚¸ã‚¢å¸‚å ´ã§é‡è¦

3. **ä¸­**: ä¸­å›½èªç¹ä½“å­—ï¼ˆzh-twï¼‰
   - å°æ¹¾ãƒ»é¦™æ¸¯å¸‚å ´

4. **ä½**: ãã®ä»–ï¼ˆpt-br, fr, it, de, esï¼‰
   - å°†æ¥çš„ãªå±•é–‹ç”¨

### 9.2 ç¿»è¨³æ–¹æ³•ã®é¸æŠ

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³A: æ‰‹å‹•ç¿»è¨³ï¼ˆæ¨å¥¨ãƒ»é«˜å“è³ªï¼‰

```bash
# è‹±èªç‰ˆã‚’é–‹ã„ã¦æ‰‹å‹•ã§ç¿»è¨³
code locales/en/common.json
```

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³B: DeepL APIã§è‡ªå‹•ç¿»è¨³

```bash
# DeepL API keyå–å¾—: https://www.deepl.com/pro-api

# ç¿»è¨³ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ
# scripts/translate.ts
```

```typescript
// ç¿»è¨³ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾‹
import * as deepl from 'deepl-node';
import fs from 'fs';

const translator = new deepl.Translator(process.env.DEEPL_API_KEY!);

async function translateFile(
  sourceLang: string,
  targetLang: string,
  sourceFile: string,
  targetFile: string
) {
  const sourceData = JSON.parse(fs.readFileSync(sourceFile, 'utf-8'));
  const translatedData: any = {};

  for (const [key, value] of Object.entries(sourceData)) {
    if (typeof value === 'string') {
      const result = await translator.translateText(
        value,
        sourceLang as any,
        targetLang as any
      );
      translatedData[key] = result.text;
    } else if (typeof value === 'object') {
      // å†å¸°çš„ã«å‡¦ç†
      translatedData[key] = await translateObject(value, sourceLang, targetLang);
    }
  }

  fs.writeFileSync(targetFile, JSON.stringify(translatedData, null, 2));
}

// å®Ÿè¡Œ
translateFile('ja', 'en', 'locales/ja/common.json', 'locales/en/common.json');
```

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³C: AWS Translateã§è‡ªå‹•ç¿»è¨³ï¼ˆã‚³ã‚¹ãƒˆé‡è¦–ï¼‰

```typescript
// AWS SDKä½¿ç”¨
import { TranslateClient, TranslateTextCommand } from "@aws-sdk/client-translate";
```

### 9.3 ç¿»è¨³å¾Œã®ç¢ºèª

```bash
# ç¿»è¨³å®Œäº†å¾Œã€å„è¨€èªã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
pnpm dev

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèª
open http://localhost:3000/en
open http://localhost:3000/zh-cn
```

---

## ã‚¹ãƒ†ãƒƒãƒ—10: æœ¬ç•ªç’°å¢ƒã¸ã®ãƒãƒ¼ã‚¸æº–å‚™

### 10.1 ãƒ†ã‚¹ãƒˆå®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] å…¨ã¦ã®è¨€èªã§è¡¨ç¤ºãŒæ­£å¸¸
- [ ] è¨€èªåˆ‡ã‚Šæ›¿ãˆãŒå…¨ãƒšãƒ¼ã‚¸ã§å‹•ä½œ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å•é¡Œãªã—
- [ ] Supabaseæ¥ç¶šãŒæ­£å¸¸
- [ ] èªè¨¼ãƒ•ãƒ­ãƒ¼ãŒå…¨è¨€èªã§å‹•ä½œ
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒé©åˆ‡
- [ ] ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤ºã‚‚å•é¡Œãªã—
- [ ] SEOãƒ¡ã‚¿ã‚¿ã‚°ãŒå„è¨€èªã§é©åˆ‡

### 10.2 Pull Requestã®ä½œæˆ

```bash
# GitHubã§Pull Requestã‚’ä½œæˆ
# base: main
# compare: feature/i18n-test-environment
```

#### PRèª¬æ˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```markdown
## æ¦‚è¦
i18nå¯¾å¿œã®å®Ÿè£…ï¼ˆ9è¨€èªã‚µãƒãƒ¼ãƒˆï¼‰

## å¤‰æ›´å†…å®¹
- [ ] i18nè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ 
- [ ] å…¨è¨€èªã®ãƒ­ã‚±ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆï¼ˆ63ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- [ ] App Routerã‚’[locale]é…ä¸‹ã«ç§»è¡Œ
- [ ] è¨€èªåˆ‡ã‚Šæ›¿ãˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¿½åŠ 
- [ ] Middlewareè¨­å®š
- [ ] ãƒ†ã‚¹ãƒˆç’°å¢ƒæ§‹ç¯‰

## ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å…¨è¨€èªãƒ†ã‚¹ãƒˆæ¸ˆã¿
- [ ] Vercelãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒã§ãƒ†ã‚¹ãƒˆæ¸ˆã¿
- [ ] ãƒ¢ãƒã‚¤ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ†ã‚¹ãƒˆæ¸ˆã¿

## ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
ï¼ˆå„è¨€èªã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ·»ä»˜ï¼‰

## ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã®ç¢ºèªäº‹é …
- [ ] æœ¬ç•ªç’°å¢ƒã®ç’°å¢ƒå¤‰æ•°ã‚’ç¢ºèª
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ä¸è¦ï¼ˆDBã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ãªã—ï¼‰
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å½±éŸ¿ã‚’ç¢ºèª
```

### 10.3 ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ãƒãƒ¼ã‚¸

1. **ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼**
   - ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼
   - æŒ‡æ‘˜äº‹é …ãŒã‚ã‚Œã°ä¿®æ­£

2. **æœ¬ç•ªç’°å¢ƒå¤‰æ•°ã®æº–å‚™**
   ```env
   # Vercel Productionç’°å¢ƒå¤‰æ•°
   NEXT_PUBLIC_SUPABASE_URL=https://production.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGc...
   ```

3. **ãƒãƒ¼ã‚¸**
   ```bash
   # PRãŒapproveã•ã‚ŒãŸã‚‰ãƒãƒ¼ã‚¸
   # GitHubã®UIã§ãƒãƒ¼ã‚¸ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

   # ãƒ­ãƒ¼ã‚«ãƒ«ã§mainãƒ–ãƒ©ãƒ³ãƒã‚’æ›´æ–°
   git checkout main
   git pull origin main
   ```

4. **æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ã®ç¢ºèª**
   - Vercelã§æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ãŒè‡ªå‹•é–‹å§‹
   - ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚°ã‚’ç¢ºèª
   - æœ¬ç•ªURLã§å‹•ä½œç¢ºèª

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼

```bash
# ã‚¨ãƒ©ãƒ¼: Module not found
# è§£æ±ºç­–: ä¾å­˜é–¢ä¿‚ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf node_modules .next
pnpm install
pnpm build
```

### å•é¡Œ2: è¨€èªãŒåˆ‡ã‚Šæ›¿ã‚ã‚‰ãªã„

```typescript
// Middlewareã®è¨­å®šã‚’ç¢ºèª
// matcher ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
export const config = {
  matcher: ['/((?!api|_next|_vercel|.*\\..*).*)',],
};
```

### å•é¡Œ3: Supabaseæ¥ç¶šã‚¨ãƒ©ãƒ¼

```bash
# ç’°å¢ƒå¤‰æ•°ã‚’ç¢ºèª
echo $NEXT_PUBLIC_SUPABASE_URL
echo $NEXT_PUBLIC_SUPABASE_ANON_KEY

# Vercelç’°å¢ƒå¤‰æ•°ã‚’å†ç¢ºèª
vercel env ls
```

### å•é¡Œ4: ç¿»è¨³ãŒè¡¨ç¤ºã•ã‚Œãªã„

```typescript
// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’ç¢ºèª
// i18n.ts ã§æ­£ã—ãã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹

// ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
console.error('Translation missing:', key);
```

---

## å‚è€ƒãƒªãƒ³ã‚¯

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [next-intl Documentation](https://next-intl-docs.vercel.app/)
- [Next.js Internationalization](https://nextjs.org/docs/app/building-your-application/routing/internationalization)
- [Supabase Documentation](https://supabase.com/docs)
- [Vercel Documentation](https://vercel.com/docs)

### ãƒ„ãƒ¼ãƒ«
- [DeepL API](https://www.deepl.com/pro-api)
- [AWS Translate](https://aws.amazon.com/translate/)
- [Google Cloud Translation](https://cloud.google.com/translate)

### é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `docs/å¤šè¨€èªå¯¾å¿œè¨­è¨ˆ.md`
- `docs/i18nãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆå®Œäº†ã‚µãƒãƒªãƒ¼.md`
- `docs/ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨€èªæ¤œå‡ºã‚ªãƒ—ã‚·ãƒ§ãƒ³.md`

---

**ä½œæˆè€…**: Claude Code
**æœ€çµ‚æ›´æ–°**: 2025-11-22
