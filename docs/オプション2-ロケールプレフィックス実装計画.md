# ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: ãƒ­ã‚±ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹å®Ÿè£…è¨ˆç”»

**ä½œæˆæ—¥**: 2025-11-28
**å¯¾è±¡**: next-intl with locale prefix (`/ja/`, `/en/`, etc.)

---

## ğŸ“‹ å®Ÿè£…æ¦‚è¦

### ç›®æ¨™
- URLæ§‹é€ : `https://pokelink.com/ja/matching` ã®ã‚ˆã†ã«è¨€èªãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’è¿½åŠ 
- SEOæœ€é©åŒ–: hreflangã‚¿ã‚°ã€è¨€èªåˆ¥ã‚µã‚¤ãƒˆãƒãƒƒãƒ—
- SNSã‚·ã‚§ã‚¢: å›½åˆ¥ã«é©åˆ‡ãªURLã§ã‚·ã‚§ã‚¢å¯èƒ½

### å½±éŸ¿ç¯„å›²
- **appãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: 79ãƒ•ã‚¡ã‚¤ãƒ«
- **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: 156ç®‡æ‰€ï¼ˆLink, useRouter, redirectä½¿ç”¨ç®‡æ‰€ï¼‰
- **ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: 12å€‹ï¼ˆmatching, trades, decks, info, etc.ï¼‰

---

## ğŸ—‚ï¸ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®å¤‰æ›´

### ç¾åœ¨ã®æ§‹é€ 
```
app/
â”œâ”€â”€ layout.tsx          # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”œâ”€â”€ page.tsx            # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸
â”œâ”€â”€ loading.tsx
â”œâ”€â”€ matching/           # ãƒãƒƒãƒãƒ³ã‚°ãƒšãƒ¼ã‚¸
â”œâ”€â”€ trades/             # ãƒˆãƒ¬ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸
â”œâ”€â”€ decks/              # ãƒ‡ãƒƒã‚­ãƒšãƒ¼ã‚¸
â”œâ”€â”€ info/               # æƒ…å ±ãƒšãƒ¼ã‚¸
â”œâ”€â”€ history/            # å±¥æ­´ãƒšãƒ¼ã‚¸
â”œâ”€â”€ favorites/          # ãŠæ°—ã«å…¥ã‚Š
â”œâ”€â”€ collages/           # ã‚³ãƒ©ãƒ¼ã‚¸ãƒ¥
â”œâ”€â”€ lists/              # ãƒªã‚¹ãƒˆ
â”œâ”€â”€ contact/            # ãŠå•ã„åˆã‚ã›
â”œâ”€â”€ auth/               # èªè¨¼ï¼ˆé™¤å¤–å¯¾è±¡ï¼‰
â”œâ”€â”€ admin/              # ç®¡ç†ç”»é¢ï¼ˆé™¤å¤–å¯¾è±¡ï¼‰
â”œâ”€â”€ content/            # ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
â””â”€â”€ api/                # APIï¼ˆé™¤å¤–å¯¾è±¡ï¼‰
```

### å¤‰æ›´å¾Œã®æ§‹é€ 
```
app/
â”œâ”€â”€ [locale]/           # ğŸ†• ãƒ­ã‚±ãƒ¼ãƒ«å‹•çš„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ layout.tsx      # â† app/layout.tsx ã‹ã‚‰ç§»å‹•ï¼ˆLocaleLayoutï¼‰
â”‚   â”œâ”€â”€ page.tsx        # â† app/page.tsx ã‹ã‚‰ç§»å‹•
â”‚   â”œâ”€â”€ loading.tsx     # â† app/loading.tsx ã‹ã‚‰ç§»å‹•
â”‚   â”œâ”€â”€ matching/       # â† app/matching/ ã‹ã‚‰ç§»å‹•
â”‚   â”œâ”€â”€ trades/         # â† app/trades/ ã‹ã‚‰ç§»å‹•
â”‚   â”œâ”€â”€ decks/          # â† app/decks/ ã‹ã‚‰ç§»å‹•
â”‚   â”œâ”€â”€ info/           # â† app/info/ ã‹ã‚‰ç§»å‹•
â”‚   â”œâ”€â”€ history/        # â† app/history/ ã‹ã‚‰ç§»å‹•
â”‚   â”œâ”€â”€ favorites/      # â† app/favorites/ ã‹ã‚‰ç§»å‹•
â”‚   â”œâ”€â”€ collages/       # â† app/collages/ ã‹ã‚‰ç§»å‹•
â”‚   â”œâ”€â”€ lists/          # â† app/lists/ ã‹ã‚‰ç§»å‹•
â”‚   â””â”€â”€ contact/        # â† app/contact/ ã‹ã‚‰ç§»å‹•
â”œâ”€â”€ layout.tsx          # ğŸ†• æ–°ã—ã„ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆæœ€å°é™ï¼‰
â”œâ”€â”€ auth/               # ãã®ã¾ã¾ï¼ˆè¨€èªä¸è¦ï¼‰
â”œâ”€â”€ admin/              # ãã®ã¾ã¾ï¼ˆè¨€èªä¸è¦ï¼‰
â”œâ”€â”€ content/            # ğŸ” è¦ç¢ºèªï¼ˆå¤šè¨€èªåŒ–ã®å¿…è¦æ€§ï¼‰
â””â”€â”€ api/                # ãã®ã¾ã¾ï¼ˆAPIã¯è¨€èªåˆ¥ãƒ‘ã‚¹ä¸è¦ï¼‰
```

---

## âœ… å®Ÿè£…ToDoãƒªã‚¹ãƒˆ

### Phase 1: æº–å‚™ãƒ»èª¿æŸ»ï¼ˆ1-2æ™‚é–“ï¼‰ âœ… å®Œäº†

#### 1-1. ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªèª¿æŸ» âœ…
èª¿æŸ»å®Œäº†ã€‚ä»¥ä¸‹ã®æ§‹é€ ãŒç¢ºèªã•ã‚Œã¾ã—ãŸ:

**ç§»å‹•å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆ10å€‹ï¼‰**
- âœ… `matching/` - 1ãƒ•ã‚¡ã‚¤ãƒ« (page.tsx)
- âœ… `trades/` - 3ãƒ•ã‚¡ã‚¤ãƒ« (2ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: [id], create)
- âœ… `decks/` - 3ãƒ•ã‚¡ã‚¤ãƒ« (2ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: [id], create)
- âœ… `info/` - 3ãƒ•ã‚¡ã‚¤ãƒ« (2ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: [id], news)
- âœ… `history/` - 1ãƒ•ã‚¡ã‚¤ãƒ« (page.tsx)
- âœ… `favorites/` - 1ãƒ•ã‚¡ã‚¤ãƒ« (page.tsx)
- âœ… `collages/` - 4ãƒ•ã‚¡ã‚¤ãƒ« (1ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: [id])
- âœ… `lists/` - 5ãƒ•ã‚¡ã‚¤ãƒ« (2ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: [id], create)
- âœ… `contact/` - 1ãƒ•ã‚¡ã‚¤ãƒ« (page.tsx)
- âœ… `content/` - 1ãƒ•ã‚¡ã‚¤ãƒ« (1ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: [id]) â† å¤šè¨€èªåŒ–å¿…è¦

**é™¤å¤–å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆ3å€‹ï¼‰**
- âœ… `auth/` - ãã®ã¾ã¾æ®‹ã™ï¼ˆèªè¨¼ã¯è¨€èªéä¾å­˜ï¼‰
- âœ… `admin/` - ãã®ã¾ã¾æ®‹ã™ï¼ˆç®¡ç†ç”»é¢ã¯æ—¥æœ¬èªã®ã¿ï¼‰
- âœ… `api/` - ãã®ã¾ã¾æ®‹ã™ï¼ˆAPIã¯è¨€èªåˆ¥ãƒ‘ã‚¹ä¸è¦ï¼‰

**ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ5å€‹ï¼‰**
- âœ… `layout.tsx` - ãƒ«ãƒ¼ãƒˆã¨ãƒ­ã‚±ãƒ¼ãƒ«ç”¨ã«åˆ†å‰²å¿…è¦
- âœ… `page.tsx` - app/[locale]/ã¸ç§»å‹•
- âœ… `loading.tsx` - app/[locale]/ã¸ç§»å‹•
- âœ… `icon.svg` - ãã®ã¾ã¾æ®‹ã™
- âœ… `globals.css` - ãã®ã¾ã¾æ®‹ã™

#### 1-2. ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ä½¿ç”¨ç®‡æ‰€ã®èª¿æŸ» âœ…

**Linkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½¿ç”¨ç®‡æ‰€: 31ãƒ•ã‚¡ã‚¤ãƒ«**

app/ é…ä¸‹ï¼ˆ17ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰:
- app/matching/page.tsx
- app/contact/page.tsx
- app/lists/page.tsx, [id]/page.tsx, create/page.tsx
- app/auth/auth-code-error/page.tsx, signup/page.tsx, reset/page.tsx, login/page.tsx
- app/trades/create/page.tsx
- app/collages/page.tsx, [id]/collage-page-client.tsx
- app/favorites/page.tsx
- app/admin/articles/page.tsx, decks/page.tsx
- app/content/[id]/page.tsx
- app/decks/page.tsx, create/page.tsx
- app/info/news/page.tsx

components/ é…ä¸‹ï¼ˆ14ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰:
- components/news-article-card.tsx
- components/info-section.tsx
- components/footer.tsx
- components/news-carousel.tsx
- components/deck-card.tsx
- components/header.tsx
- components/history-item-card.tsx
- components/deck-horizontal-row.tsx
- components/layout/footer-navigation.tsx
- components/layout/header.tsx
- components/admin/article-table.tsx, admin-sidebar.tsx
- components/info/latest-info-section.tsx, latest-info-carousel.tsx, render-article.tsx
- components/collage/collage-list.tsx

**useRouter/usePathnameä½¿ç”¨ç®‡æ‰€: 20ãƒ•ã‚¡ã‚¤ãƒ«**

app/ é…ä¸‹ï¼ˆ11ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰:
- app/page.tsx (useSearchParams, useRouter)
- app/lists/page.tsx, [id]/page.tsx
- app/auth/signup/page.tsx, reset/page.tsx, login/page.tsx
- app/trades/create/page.tsx
- app/collages/[id]/collage-page-client.tsx
- app/favorites/page.tsx
- app/admin/layout.tsx (useRouter, usePathname)
- app/decks/[id]/page.tsx

components/ é…ä¸‹ï¼ˆ9ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰:
- components/login-prompt.tsx
- components/notification-dropdown.tsx
- components/trade-detail-404.tsx
- components/footer.tsx (usePathname)
- components/trade-post-card.tsx
- components/trade-detail-client.tsx
- components/ui/login-prompt-modal.tsx
- components/layout/footer-navigation.tsx (usePathname)
- components/layout/header.tsx
- components/admin/article-table.tsx, admin-sidebar.tsx, article-editor.tsx
- components/analytics/page-view-tracker.tsx (usePathname, useSearchParams)

**redirectä½¿ç”¨ç®‡æ‰€: 5ãƒ•ã‚¡ã‚¤ãƒ«**
- app/auth/confirm/route.ts (3ç®‡æ‰€: NextResponse.redirect)
- app/auth/callback/route.ts (7ç®‡æ‰€: NextResponse.redirect)
- app/admin/auth/callback/route.ts (5ç®‡æ‰€: NextResponse.redirect)
- lib/auth/admin-auth.ts (3ç®‡æ‰€: redirect from next/navigation)

#### 1-3. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª âœ…
- âœ… next.config.mjs - ç¢ºèªæ¸ˆã¿ã€next-intlãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¿½åŠ å¿…è¦
- âœ… middleware.ts - ä½œæˆæ¸ˆã¿ã€localePrefixå¤‰æ›´å¿…è¦
- âœ… i18n.ts - ä½œæˆæ¸ˆã¿ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸çµ±åˆå¿…è¦
- âœ… tsconfig.json - pathã‚¨ã‚¤ãƒªã‚¢ã‚¹ç¢ºèªæ¸ˆã¿

---



### Phase 2: next-intlè¨­å®šï¼ˆ1æ™‚é–“ï¼‰

#### 2-1. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆãƒ»æ›´æ–°
- [x] **i18n.ts ä½œæˆ** - å®Œäº†
  - [x] localeså®šç¾©
  - [x] defaultLocaleè¨­å®š
  - [ ] è¤‡æ•°ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿è¨­å®š

- [x] **middleware.ts æ›´æ–°** - ä¸€éƒ¨å®Œäº†
  - [x] createMiddlewareã‚¤ãƒ³ãƒãƒ¼ãƒˆ
  - [ ] localePrefix: 'always' ã«å¤‰æ›´
  - [ ] localeDetectionè¨­å®š
  - [ ] matcherè¨­å®šï¼ˆauth, admin, apié™¤å¤–ï¼‰

- [ ] **next.config.mjs æ›´æ–°**
  - [ ] next-intlãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¿½åŠ 
  ```javascript
  import createNextIntlPlugin from 'next-intl/plugin';
  const withNextIntl = createNextIntlPlugin();
  export default withNextIntl(nextConfig);
  ```

#### 2-2. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚¡ã‚¤ãƒ«çµ±åˆ
- [ ] **i18n.ts ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’çµ±åˆèª­ã¿è¾¼ã¿**
  ```typescript
  messages: {
    ...((await import(`./locales/${locale}/common.json`)).default),
    ...((await import(`./locales/${locale}/auth.json`)).default),
    ...((await import(`./locales/${locale}/cards.json`)).default),
    ...((await import(`./locales/${locale}/errors.json`)).default),
    ...((await import(`./locales/${locale}/forms.json`)).default),
    ...((await import(`./locales/${locale}/messages.json`)).default),
    ...((await import(`./locales/${locale}/pages.json`)).default),
  }
  ```

---

### Phase 3: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ å¤‰æ›´ï¼ˆ2-3æ™‚é–“ï¼‰

#### 3-1. [locale] ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
- [ ] **app/[locale]/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ**
  ```bash
  mkdir -p app/[locale]
  ```

#### 3-2. ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®åˆ†å‰²
- [ ] **æ–°ã—ã„ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä½œæˆ** (`app/layout.tsx`)
  - [ ] æœ€å°é™ã®è¨­å®šï¼ˆhtml, body, å…±é€šProviderï¼‰
  - [ ] è¨€èªè¨­å®šã¯[locale]/layout.tsxã«å§”è­²

- [ ] **ãƒ­ã‚±ãƒ¼ãƒ«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä½œæˆ** (`app/[locale]/layout.tsx`)
  - [ ] ç¾åœ¨ã® `app/layout.tsx` ã‚’ã‚³ãƒ”ãƒ¼
  - [ ] `params.locale` ã‚’å—ã‘å–ã‚‹
  - [ ] `NextIntlClientProvider` ã§ãƒ©ãƒƒãƒ—
  - [ ] `<html lang={locale}>` ã«å¤‰æ›´

#### 3-3. ãƒšãƒ¼ã‚¸ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç§»å‹•
- [ ] **ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç§»å‹•**
  - [ ] `app/page.tsx` â†’ `app/[locale]/page.tsx`
  - [ ] `app/loading.tsx` â†’ `app/[locale]/loading.tsx`
  - [ ] ãã®ä»–ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª

- [ ] **å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç§»å‹•**
  - [ ] `app/matching/` â†’ `app/[locale]/matching/`
  - [ ] `app/trades/` â†’ `app/[locale]/trades/`
  - [ ] `app/decks/` â†’ `app/[locale]/decks/`
  - [ ] `app/info/` â†’ `app/[locale]/info/`
  - [ ] `app/history/` â†’ `app/[locale]/history/`
  - [ ] `app/favorites/` â†’ `app/[locale]/favorites/`
  - [ ] `app/collages/` â†’ `app/[locale]/collages/`
  - [ ] `app/lists/` â†’ `app/[locale]/lists/`
  - [ ] `app/contact/` â†’ `app/[locale]/contact/`
  - [ ] `app/content/` â†’ åˆ¤æ–­å¾Œã«ç§»å‹•ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

#### 3-4. generateStaticParamsè¿½åŠ 
- [ ] **app/[locale]/layout.tsx ã«è¿½åŠ **
  ```typescript
  export function generateStaticParams() {
    return locales.map((locale) => ({ locale }));
  }
  ```

---

### Phase 4: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ä¿®æ­£ï¼ˆ3-4æ™‚é–“ï¼‰

#### 4-1. Linkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä¸€æ‹¬ç½®ãæ›ãˆ
- [ ] **next/link ã‹ã‚‰ next-intl/link ã¸å¤‰æ›´**
  - [ ] `components/` é…ä¸‹ã®å…¨Linkã‚’æ¤œç´¢ãƒ»ç½®æ›
  - [ ] `app/[locale]/` é…ä¸‹ã®å…¨Linkã‚’æ¤œç´¢ãƒ»ç½®æ›
  - [ ] ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ã‚’æ›´æ–°
    ```typescript
    // Before
    import Link from 'next/link';

    // After
    import Link from 'next-intl/link';
    ```

#### 4-2. useRouter ã®ç½®ãæ›ãˆ
- [ ] **next/navigation ã‹ã‚‰ next-intl/navigation ã¸å¤‰æ›´**
  - [ ] `useRouter` ä½¿ç”¨ç®‡æ‰€ã‚’æ¤œç´¢
  - [ ] ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ã‚’æ›´æ–°
    ```typescript
    // Before
    import { useRouter } from 'next/navigation';

    // After
    import { useRouter } from 'next-intl/navigation';
    ```

#### 4-3. redirect ã®ç½®ãæ›ãˆ
- [ ] **ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®redirect**
  ```typescript
  // Before
  import { redirect } from 'next/navigation';

  // After
  import { redirect } from 'next-intl/navigation';
  ```

#### 4-4. å‹•çš„hrefã®ä¿®æ­£
- [ ] **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ã§ã®hrefç”Ÿæˆã‚’ç¢ºèª**
  - [ ] `` `/${path}` `` â†’ next-intl/linkã§è‡ªå‹•å¯¾å¿œ
  - [ ] æ˜ç¤ºçš„ã« `/ja/` ã‚’å«ã‚€URLã‚’å‰Šé™¤

---

### Phase 5: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ›´æ–°ï¼ˆ2-3æ™‚é–“ï¼‰

#### 5-1. useTranslations ãƒ•ãƒƒã‚¯ã®å°å…¥
- [ ] **å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«è¿½åŠ **
  - [ ] Header ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  - [ ] Footer ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  - [ ] Navigation ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

- [ ] **ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«è¿½åŠ **
  - [ ] ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
  - [ ] ãƒãƒƒãƒãƒ³ã‚°ãƒšãƒ¼ã‚¸
  - [ ] ãƒˆãƒ¬ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸
  - [ ] ãƒ‡ãƒƒã‚­ãƒšãƒ¼ã‚¸
  - [ ] ãã®ä»–ä¸»è¦ãƒšãƒ¼ã‚¸

#### 5-2. useLocale ãƒ•ãƒƒã‚¯ã®å°å…¥
- [ ] **è¨€èªä¾å­˜ã®å‡¦ç†ãŒã‚ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**
  - [ ] æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  - [ ] æ•°å€¤ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  - [ ] ã‚«ã‚¹ã‚¿ãƒ è¨€èªåˆ‡ã‚Šæ›¿ãˆãƒ­ã‚¸ãƒƒã‚¯

---

### Phase 6: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å¤šè¨€èªå¯¾å¿œï¼ˆ2-3æ™‚é–“ï¼‰

#### 6-1. card-api.ts ã®æ›´æ–°
- [ ] **useLocale() ã‚’è¿½åŠ ã—ã¦ãƒ­ã‚±ãƒ¼ãƒ«ã‚’å–å¾—**
  ```typescript
  'use client';
  import { useLocale } from 'next-intl';
  import { getLocalizedText } from '@/lib/i18n-helpers';

  export function useCardData(cardId: number) {
    const locale = useLocale();
    const card = await fetchCardById(cardId);

    return {
      ...card,
      name: getLocalizedText(card.name_multilingual, locale),
      image_url: getLocalizedText(card.image_url_multilingual, locale),
    };
  }
  ```

#### 6-2. ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ãƒ­ã‚±ãƒ¼ãƒ«å–å¾—
- [ ] **getLocale() ã‚’ä½¿ç”¨**
  ```typescript
  import { getLocale } from 'next-intl/server';

  export default async function Page() {
    const locale = await getLocale();
    const cards = await getCards();
    const localizedCards = cards.map(card =>
      localizeCard(card, locale)
    );
  }
  ```

#### 6-3. API RouteHandlerã§ã®ãƒ­ã‚±ãƒ¼ãƒ«å‡¦ç†
- [ ] **app/api/ ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ç¢ºèª**
  - [ ] ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ã‹ã‚‰ãƒ­ã‚±ãƒ¼ãƒ«ã‚’å–å¾—
  - [ ] JSONBå½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’é©åˆ‡ã«è¿”ã™

---

### Phase 7: SEOæœ€é©åŒ–ï¼ˆ1-2æ™‚é–“ï¼‰

#### 7-1. hreflang ã‚¿ã‚°ã®è¿½åŠ 
- [ ] **app/[locale]/layout.tsx ã«è¿½åŠ **
  ```typescript
  export async function generateMetadata({ params }: { params: { locale: string } }) {
    return {
      alternates: {
        languages: {
          'ja': 'https://pokelink.com/ja',
          'en': 'https://pokelink.com/en',
          'zh-cn': 'https://pokelink.com/zh-cn',
          'zh-tw': 'https://pokelink.com/zh-tw',
          'ko': 'https://pokelink.com/ko',
          'fr': 'https://pokelink.com/fr',
          'es': 'https://pokelink.com/es',
          'de': 'https://pokelink.com/de',
          'x-default': 'https://pokelink.com/en',
        },
      },
    };
  }
  ```

#### 7-2. ã‚µã‚¤ãƒˆãƒãƒƒãƒ—ã®ç”Ÿæˆ
- [ ] **app/sitemap.ts ã‚’ä½œæˆ**
  - [ ] å„è¨€èªç‰ˆã®URLã‚’ç”Ÿæˆ
  - [ ] å‹•çš„ãƒšãƒ¼ã‚¸ã‚‚å«ã‚ã‚‹

#### 7-3. robots.txt ã®æ›´æ–°
- [ ] **app/robots.ts ã‚’ä½œæˆ**
  - [ ] ã‚µã‚¤ãƒˆãƒãƒƒãƒ—URLã‚’è¿½åŠ 

---

### Phase 8: ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®šï¼ˆ1æ™‚é–“ï¼‰

#### 8-1. ãƒ«ãƒ¼ãƒˆURLã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- [ ] **middleware.ts ã§ãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹ã‚’å‡¦ç†**
  - [ ] `/` â†’ `/ja` or `/en` ï¼ˆè¨€èªæ¤œå‡ºï¼‰
  - [ ] æ—§URL â†’ æ–°URLï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

#### 8-2. å¤–éƒ¨ã‹ã‚‰ã®å¤ã„ãƒªãƒ³ã‚¯å¯¾å¿œ
- [ ] **next.config.mjs ã« redirects è¿½åŠ **
  ```javascript
  async redirects() {
    return [
      {
        source: '/matching',
        destination: '/ja/matching',
        permanent: true,
      },
      // ä»–ã®ãƒšãƒ¼ã‚¸ã‚‚åŒæ§˜
    ];
  }
  ```

---

### Phase 9: ãƒ†ã‚¹ãƒˆï¼ˆ2-3æ™‚é–“ï¼‰

#### 9-1. ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ
- [ ] **å„è¨€èªã§ã®ãƒšãƒ¼ã‚¸è¡¨ç¤ºç¢ºèª**
  - [ ] `/ja/matching` - æ—¥æœ¬èªè¡¨ç¤º
  - [ ] `/en/matching` - è‹±èªè¡¨ç¤º
  - [ ] `/zh-tw/matching` - ä¸­å›½èªç¹ä½“å­—è¡¨ç¤º
  - [ ] ãã®ä»–è¨€èªã‚‚ç¢ºèª

- [ ] **è¨€èªåˆ‡ã‚Šæ›¿ãˆå‹•ä½œç¢ºèª**
  - [ ] è¨€èªé¸æŠUIã®å‹•ä½œ
  - [ ] Cookieä¿å­˜ã®å‹•ä½œ
  - [ ] ãƒ–ãƒ©ã‚¦ã‚¶è¨­å®šã‹ã‚‰ã®è¨€èªæ¤œå‡º

- [ ] **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å‹•ä½œç¢ºèª**
  - [ ] Linkã‚¯ãƒªãƒƒã‚¯
  - [ ] ãƒ–ãƒ©ã‚¦ã‚¶ãƒãƒƒã‚¯
  - [ ] ç›´æ¥URLå…¥åŠ›
  - [ ] ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

#### 9-2. ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ†ã‚¹ãƒˆ
- [ ] **å¤šè¨€èªãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºç¢ºèª**
  - [ ] ã‚«ãƒ¼ãƒ‰åã®è¡¨ç¤ºï¼ˆJSONBï¼‰
  - [ ] è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«ã®è¡¨ç¤ºï¼ˆJSONBï¼‰
  - [ ] ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‹•ä½œï¼ˆè¨€èªæœªå¯¾å¿œã®å ´åˆï¼‰

#### 9-3. SEOãƒ†ã‚¹ãƒˆ
- [ ] **ãƒ¡ã‚¿ã‚¿ã‚°ç¢ºèª**
  - [ ] hreflangã‚¿ã‚°ã®ç”Ÿæˆ
  - [ ] langå±æ€§ã®è¨­å®š
  - [ ] OGã‚¿ã‚°ã®è¨€èªåˆ¥è¨­å®š

---

### Phase 10: ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™ï¼ˆ1æ™‚é–“ï¼‰

#### 10-1. ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
- [ ] **`npm run build` ã§ã‚¨ãƒ©ãƒ¼ãŒãªã„ã‹ç¢ºèª**
  - [ ] TypeScriptã‚¨ãƒ©ãƒ¼
  - [ ] ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¨ãƒ©ãƒ¼
  - [ ] ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–ã®ç¢ºèª

#### 10-2. ç’°å¢ƒå¤‰æ•°ç¢ºèª
- [ ] **Vercelç’°å¢ƒå¤‰æ•°ã®ç¢ºèª**
  - [ ] NEXT_PUBLIC_* ã®ç¢ºèª
  - [ ] ä»–ã®ç’°å¢ƒå¤‰æ•°

#### 10-3. Vercelè¨­å®š
- [ ] **vercel.json ã®ç¢ºèªãƒ»ä½œæˆ**
  - [ ] ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®š
  - [ ] ãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š

---

## ğŸ“Š ãƒªã‚¹ã‚¯ãƒ»æ³¨æ„äº‹é …

### é«˜ãƒªã‚¹ã‚¯é …ç›®
1. **æ—¢å­˜URLã®å¤‰æ›´**
   - å¤–éƒ¨ã‹ã‚‰ã®ãƒªãƒ³ã‚¯ãŒåˆ‡ã‚Œã‚‹å¯èƒ½æ€§
   - â†’ ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®šã§å¯¾å¿œ

2. **å¤§é‡ã®ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•**
   - Gitã®å±¥æ­´ãŒè¤‡é›‘ã«ãªã‚‹
   - â†’ ã‚³ãƒŸãƒƒãƒˆã‚’åˆ†å‰²ã—ã¦ç®¡ç†

3. **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã®å¤§é‡ä¿®æ­£**
   - ä¿®æ­£æ¼ã‚Œã®å¯èƒ½æ€§
   - â†’ è‡ªå‹•æ¤œç´¢ãƒ»ç½®æ›ãƒ„ãƒ¼ãƒ«ã‚’æ´»ç”¨

### ä¸­ãƒªã‚¹ã‚¯é …ç›®
1. **æ—¢å­˜ã®çŠ¶æ…‹ç®¡ç†ã¨ã®æ•´åˆ**
   - Cookie, localStorageç­‰

2. **ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã®äº’æ›æ€§**
   - Supabase authç­‰

---

## â±ï¸ æ‰€è¦æ™‚é–“è¦‹ç©ã‚‚ã‚Š

| Phase | ã‚¿ã‚¹ã‚¯ | è¦‹ç©æ™‚é–“ |
|-------|--------|----------|
| Phase 1 | æº–å‚™ãƒ»èª¿æŸ» | 1-2æ™‚é–“ |
| Phase 2 | next-intlè¨­å®š | 1æ™‚é–“ |
| Phase 3 | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ å¤‰æ›´ | 2-3æ™‚é–“ |
| Phase 4 | ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ä¿®æ­£ | 3-4æ™‚é–“ |
| Phase 5 | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ›´æ–° | 2-3æ™‚é–“ |
| Phase 6 | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å¤šè¨€èªå¯¾å¿œ | 2-3æ™‚é–“ |
| Phase 7 | SEOæœ€é©åŒ– | 1-2æ™‚é–“ |
| Phase 8 | ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®š | 1æ™‚é–“ |
| Phase 9 | ãƒ†ã‚¹ãƒˆ | 2-3æ™‚é–“ |
| Phase 10 | ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™ | 1æ™‚é–“ |
| **åˆè¨ˆ** | | **16-24æ™‚é–“** |

---

## ğŸ¯ å„ªå…ˆé †ä½

### æœ€å„ªå…ˆï¼ˆã™ãã«å®Ÿæ–½ï¼‰
1. Phase 1: èª¿æŸ»
2. Phase 2: next-intlè¨­å®š
3. Phase 3: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ å¤‰æ›´

### é«˜å„ªå…ˆï¼ˆæ¬¡ã«å®Ÿæ–½ï¼‰
4. Phase 4: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ä¿®æ­£
5. Phase 5: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ›´æ–°

### ä¸­å„ªå…ˆï¼ˆæ©Ÿèƒ½å®Ÿè£…å¾Œï¼‰
6. Phase 6: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å¤šè¨€èªå¯¾å¿œ
7. Phase 7: SEOæœ€é©åŒ–

### ä½å„ªå…ˆï¼ˆãƒªãƒªãƒ¼ã‚¹å‰ï¼‰
8. Phase 8: ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®š
9. Phase 9: ãƒ†ã‚¹ãƒˆ
10. Phase 10: ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™

---

**ä½œæˆè€…**: Claude Code
**æœ€çµ‚æ›´æ–°**: 2025-11-28
